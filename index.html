<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="DataCollection.js : Manipulate data from API responses with ease.">

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>DataCollection.js</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/thestorefront/DataCollection.js">View on GitHub</a>

          <h1 id="project_title">DataCollection.js</h1>
          <h2 id="project_tagline">Manipulate data from API responses with ease.</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/thestorefront/DataCollection.js/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/thestorefront/DataCollection.js/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h1>
<a id="datacollectionjs-" class="anchor" href="#datacollectionjs-" aria-hidden="true"><span class="octicon octicon-link"></span></a>DataCollection.js <img src="http://img.shields.io/badge/coverage-100%25-brightgreen.svg" alt="'coverage'">
</h1>

<p>Manipulate data from API responses with ease.</p>

<p>Inspired by modern Object Relational Managers, DataCollection.js is a
JavaScript library for storage, filtration, manipulation and accession of large
datasets. It is ideal for working with data returned from RESTful API
endpoints.</p>

<p>Boasting synchronous performance that nears native Array manipulation for large
(&gt;10,000) recordsets, let DataCollection.js do your heavy lifting for you.</p>

<h1>
<a id="installation" class="anchor" href="#installation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Installation</h1>

<p>You can begin using DataCollection.js by embedding the following script (assumes
  it has been placed in your root directory)</p>

<h3>
<a id="web" class="anchor" href="#web" aria-hidden="true"><span class="octicon octicon-link"></span></a>Web</h3>

<div class="highlight highlight-html"><pre>&lt;<span class="pl-ent">script</span> <span class="pl-e">src</span>=<span class="pl-s1"><span class="pl-pds">"</span>/data_collection-1.1.6.js<span class="pl-pds">"</span></span>&gt;&lt;/<span class="pl-ent">script</span>&gt;</pre></div>

<p>Alternatively, the minified version can be found at</p>

<div class="highlight highlight-html"><pre>&lt;<span class="pl-ent">script</span> <span class="pl-e">src</span>=<span class="pl-s1"><span class="pl-pds">"</span>/data_collection-1.1.6-min.js<span class="pl-pds">"</span></span>&gt;&lt;/<span class="pl-ent">script</span>&gt;</pre></div>

<p>You can then start using <code>DataCollection</code> objects with</p>

<div class="highlight highlight-javascript"><pre><span class="pl-s">var</span> dc <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">DataCollection</span>();</pre></div>

<h3>
<a id="node" class="anchor" href="#node" aria-hidden="true"><span class="octicon octicon-link"></span></a>node</h3>

<div class="highlight highlight-bash"><pre>$ npm install data-collection</pre></div>

<p>Followed by a script with this require...</p>

<div class="highlight highlight-javascript"><pre><span class="pl-s">var</span> DataCollection <span class="pl-k">=</span> <span class="pl-s3">require</span>(<span class="pl-s1"><span class="pl-pds">'</span>data-collection<span class="pl-pds">'</span></span>);</pre></div>

<p>Woohoo!</p>

<h1>
<a id="examples" class="anchor" href="#examples" aria-hidden="true"><span class="octicon octicon-link"></span></a>Examples</h1>

<p>DataCollection can be used for fast, synchronous processing of large datasets
(arrays of objects) - i.e. a RESTful API response.</p>

<p>It is especially useful for maintaining maps of specific keys and indexing
results.</p>

<p>Let's say that I have a standardized Array containing the results of a RESTful
API response. My data set looks like this:</p>

<div class="highlight highlight-javascript"><pre><span class="pl-s">var</span> characters <span class="pl-k">=</span> [
  {
    id<span class="pl-k">:</span> <span class="pl-c1">1</span>,
    first_name<span class="pl-k">:</span> <span class="pl-s1"><span class="pl-pds">'</span>Jon<span class="pl-pds">'</span></span>,
    last_name<span class="pl-k">:</span> <span class="pl-s1"><span class="pl-pds">'</span>Snow<span class="pl-pds">'</span></span>,
    gender<span class="pl-k">:</span> <span class="pl-s1"><span class="pl-pds">'</span>m<span class="pl-pds">'</span></span>,
    age<span class="pl-k">:</span> <span class="pl-c1">14</span>,
    location<span class="pl-k">:</span> <span class="pl-s1"><span class="pl-pds">'</span>Winterfell<span class="pl-pds">'</span></span>
  },
  {
    id<span class="pl-k">:</span> <span class="pl-c1">2</span>,
    first_name<span class="pl-k">:</span> <span class="pl-s1"><span class="pl-pds">'</span>Eddard<span class="pl-pds">'</span></span>,
    last_name<span class="pl-k">:</span> <span class="pl-s1"><span class="pl-pds">'</span>Stark<span class="pl-pds">'</span></span>,
    gender<span class="pl-k">:</span> <span class="pl-s1"><span class="pl-pds">'</span>m<span class="pl-pds">'</span></span>,
    age<span class="pl-k">:</span> <span class="pl-c1">35</span>,
    location<span class="pl-k">:</span> <span class="pl-s1"><span class="pl-pds">'</span>Winterfell<span class="pl-pds">'</span></span>
  },
  {
    id<span class="pl-k">:</span> <span class="pl-c1">3</span>,
    first_name<span class="pl-k">:</span> <span class="pl-s1"><span class="pl-pds">'</span>Catelyn<span class="pl-pds">'</span></span>,
    last_name<span class="pl-k">:</span> <span class="pl-s1"><span class="pl-pds">'</span>Stark<span class="pl-pds">'</span></span>,
    gender<span class="pl-k">:</span> <span class="pl-s1"><span class="pl-pds">'</span>f<span class="pl-pds">'</span></span>,
    age<span class="pl-k">:</span> <span class="pl-c1">33</span>,
    location<span class="pl-k">:</span> <span class="pl-s1"><span class="pl-pds">'</span>Winterfell<span class="pl-pds">'</span></span>
  },
  {
    id<span class="pl-k">:</span> <span class="pl-c1">4</span>,
    first_name<span class="pl-k">:</span> <span class="pl-s1"><span class="pl-pds">'</span>Roose<span class="pl-pds">'</span></span>,
    last_name<span class="pl-k">:</span> <span class="pl-s1"><span class="pl-pds">'</span>Bolton<span class="pl-pds">'</span></span>,
    gender<span class="pl-k">:</span> <span class="pl-s1"><span class="pl-pds">'</span>m<span class="pl-pds">'</span></span>,
    age<span class="pl-k">:</span> <span class="pl-c1">40</span>,
    location<span class="pl-k">:</span> <span class="pl-s1"><span class="pl-pds">'</span>Dreadfort<span class="pl-pds">'</span></span>
  },
  {
    id<span class="pl-k">:</span> <span class="pl-c1">5</span>,
    first_name<span class="pl-k">:</span> <span class="pl-s1"><span class="pl-pds">'</span>Ramsay<span class="pl-pds">'</span></span>,
    last_name<span class="pl-k">:</span> <span class="pl-s1"><span class="pl-pds">'</span>Snow<span class="pl-pds">'</span></span>,
    gender<span class="pl-k">:</span> <span class="pl-s1"><span class="pl-pds">'</span>m<span class="pl-pds">'</span></span>,
    age<span class="pl-k">:</span> <span class="pl-c1">15</span>,
    location<span class="pl-k">:</span> <span class="pl-s1"><span class="pl-pds">'</span>Dreadfort<span class="pl-pds">'</span></span>
  }
];</pre></div>

<p>First off, let's load this data into a <code>DataCollection</code>...</p>

<div class="highlight highlight-javascript"><pre><span class="pl-s">var</span> charDC <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">DataCollection</span>(characters);</pre></div>

<p>Now, let's approach some problems...</p>

<hr>

<h3>
<a id="how-do-i-find-the-bastards-from-the-north" class="anchor" href="#how-do-i-find-the-bastards-from-the-north" aria-hidden="true"><span class="octicon octicon-link"></span></a>How do I find the Bastards from the North?</h3>

<p><code>filter</code> allows us to look for a specific value.</p>

<div class="highlight highlight-javascript"><pre><span class="pl-s">var</span> bastards <span class="pl-k">=</span> charDC.query().filter({last_name<span class="pl-k">:</span> <span class="pl-s1"><span class="pl-pds">'</span>Snow<span class="pl-pds">'</span></span>}).values();</pre></div>

<hr>

<h3>
<a id="how-do-i-find-out-the-highest-age" class="anchor" href="#how-do-i-find-out-the-highest-age" aria-hidden="true"><span class="octicon octicon-link"></span></a>How do I find out the highest age?</h3>

<p>A simple <code>max()</code> call will do the trick.</p>

<div class="highlight highlight-javascript"><pre><span class="pl-s">var</span> topAge <span class="pl-k">=</span> charDC.query().<span class="pl-s3">max</span>(<span class="pl-s1"><span class="pl-pds">'</span>age<span class="pl-pds">'</span></span>);</pre></div>

<hr>

<h3>
<a id="how-do-i-find-all-the-unique-locations" class="anchor" href="#how-do-i-find-all-the-unique-locations" aria-hidden="true"><span class="octicon octicon-link"></span></a>How do I find all the unique locations?</h3>

<p>DataCollection provides an easy <code>distinct</code> function for use.</p>

<h6>
<a id="datacollection" class="anchor" href="#datacollection" aria-hidden="true"><span class="octicon octicon-link"></span></a>DataCollection</h6>

<div class="highlight highlight-javascript"><pre><span class="pl-s">var</span> locations <span class="pl-k">=</span> charDC.query().distinct(<span class="pl-s1"><span class="pl-pds">'</span>location<span class="pl-pds">'</span></span>);</pre></div>

<hr>

<h3>
<a id="what-if-i-want-to-permanently-remove-catelyn-and-eddard" class="anchor" href="#what-if-i-want-to-permanently-remove-catelyn-and-eddard" aria-hidden="true"><span class="octicon octicon-link"></span></a>What if I want to permanently remove Catelyn and Eddard?</h3>

<p>No problem!</p>

<h6>
<a id="datacollection-1" class="anchor" href="#datacollection-1" aria-hidden="true"><span class="octicon octicon-link"></span></a>DataCollection</h6>

<div class="highlight highlight-javascript"><pre>charDC.query().filter({first_name__in<span class="pl-k">:</span> [<span class="pl-s1"><span class="pl-pds">'</span>Catelyn<span class="pl-pds">'</span></span>, <span class="pl-s1"><span class="pl-pds">'</span>Eddard<span class="pl-pds">'</span></span>]}).<span class="pl-s3">remove</span>();</pre></div>

<hr>

<h3>
<a id="more-examples" class="anchor" href="#more-examples" aria-hidden="true"><span class="octicon octicon-link"></span></a>More examples</h3>

<div class="highlight highlight-javascript"><pre><span class="pl-c">// Will return Jon, Eddard and Ramsay</span>
charDC.query()
  .filter({gender<span class="pl-k">:</span> <span class="pl-s1"><span class="pl-pds">'</span>m<span class="pl-pds">'</span></span>, age__lt<span class="pl-k">:</span> <span class="pl-c1">40</span>})
  .values();

<span class="pl-c">// Updates location</span>
charDC.query()
  .filter({location<span class="pl-k">:</span> <span class="pl-s1"><span class="pl-pds">'</span>Winterfell<span class="pl-pds">'</span></span>})
  .exclude({first_name<span class="pl-k">:</span> <span class="pl-s1"><span class="pl-pds">'</span>Jon<span class="pl-pds">'</span></span>})
  .update({location<span class="pl-k">:</span> <span class="pl-s1"><span class="pl-pds">'</span>King<span class="pl-cce">\'</span>s Landing<span class="pl-pds">'</span></span>});

<span class="pl-c">// Finds Roose, Ramsay</span>
chardDC.query()
  .filter({first_name__contains<span class="pl-k">:</span> <span class="pl-s1"><span class="pl-pds">'</span>R<span class="pl-pds">'</span></span>});

<span class="pl-c">// Finds Roose, Ramsay, Eddard --- case insensitive</span>
charDC.query()
  .filter({first_name__icontains<span class="pl-k">:</span> <span class="pl-s1"><span class="pl-pds">'</span>R<span class="pl-pds">'</span></span>})
  .values();

<span class="pl-c">// Creates a mapping for current future values...</span>
charDC.createMapping(<span class="pl-s1"><span class="pl-pds">'</span>is_bastard<span class="pl-pds">'</span></span>, <span class="pl-st">function</span>(<span class="pl-vpf">row</span>) {
  <span class="pl-k">return</span> row.last_name <span class="pl-k">===</span> <span class="pl-s1"><span class="pl-pds">'</span>Snow<span class="pl-pds">'</span></span>;
});

<span class="pl-c">// true</span>
charDC.query().filter({first_name<span class="pl-k">:</span> <span class="pl-s1"><span class="pl-pds">'</span>Jon<span class="pl-pds">'</span></span>}).first().is_bastard;
<span class="pl-c">// false</span>
charDC.query().filter({first_name<span class="pl-k">:</span> <span class="pl-s1"><span class="pl-pds">'</span>Catelyn<span class="pl-pds">'</span></span>}).first().is_bastard;

<span class="pl-c">// Add an entry (Can accept each entry as an argument, or an array)</span>
charDC.insert({
  id<span class="pl-k">:</span> <span class="pl-c1">6</span>,
  first_name<span class="pl-k">:</span> <span class="pl-s1"><span class="pl-pds">'</span>Rob<span class="pl-pds">'</span></span>,
  last_name<span class="pl-k">:</span> <span class="pl-s1"><span class="pl-pds">'</span>Stark<span class="pl-pds">'</span></span>,
  gender<span class="pl-k">:</span> <span class="pl-s1"><span class="pl-pds">'</span>m<span class="pl-pds">'</span></span>,
  age<span class="pl-k">:</span> <span class="pl-c1">14</span>,
  location<span class="pl-k">:</span> <span class="pl-s1"><span class="pl-pds">'</span>Winterfell<span class="pl-pds">'</span></span>
});

<span class="pl-c">// new entry, but is also false</span>
charDC.query().filter({first_name<span class="pl-k">:</span> <span class="pl-s1"><span class="pl-pds">'</span>Rob<span class="pl-pds">'</span></span>}).first().is_bastard;

<span class="pl-c">// will return Eddard and Catelyn rows</span>
charDC.query()
  .<span class="pl-s3">sort</span>(<span class="pl-s1"><span class="pl-pds">'</span>age<span class="pl-pds">'</span></span>, <span class="pl-c1">true</span>) <span class="pl-c">// sortDesc = true</span>
  .limit(<span class="pl-c1">1</span>, <span class="pl-c1">2</span>)
  .values();</pre></div>

<h3>
<a id="nested-objects" class="anchor" href="#nested-objects" aria-hidden="true"><span class="octicon octicon-link"></span></a>Nested objects</h3>

<p>What if I have object inside of my DataCollection? Can I filter and sort by
those fields as well?</p>

<p>Of course! Separate nested fields by double underscores (<code>__</code>).</p>

<p>Please note that when using this method, exact values must be checked for using
<code>'__is'</code>.</p>

<div class="highlight highlight-javascript"><pre>
<span class="pl-s">var</span> dc <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">DataCollection</span>();
dc.<span class="pl-s3">load</span>([{
  main<span class="pl-k">:</span> {
    sub<span class="pl-k">:</span> <span class="pl-c1">7</span>,
    sub2<span class="pl-k">:</span> {
      low<span class="pl-k">:</span> <span class="pl-c1">8</span>
    }
  }
}, {
  main<span class="pl-k">:</span> {
    sub<span class="pl-k">:</span> <span class="pl-c1">7</span>,
    sub2<span class="pl-k">:</span> {
      low<span class="pl-k">:</span> <span class="pl-c1">20</span>
    }
  }
}, {
  main<span class="pl-k">:</span> {
    sub<span class="pl-k">:</span> <span class="pl-k">-</span><span class="pl-c1">1</span>,
    sub2<span class="pl-k">:</span> {
      low<span class="pl-k">:</span> <span class="pl-c1">16</span>
    }
  }
}]);

<span class="pl-c">// Returns only first two rows</span>
dc.query().filter({main__sub__is<span class="pl-k">:</span> <span class="pl-c1">7</span>}).values();

<span class="pl-c">// Returns only last two rows</span>
dc.query().filter({main__sub__low__gte<span class="pl-k">:</span> <span class="pl-c1">10</span>}).values();
</pre></div>

<p>And there's more! Try playing around.</p>

<h1>
<a id="documentation" class="anchor" href="#documentation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Documentation</h1>

<h2>
<a id="datacollection-object" class="anchor" href="#datacollection-object" aria-hidden="true"><span class="octicon octicon-link"></span></a>DataCollection Object</h2>

<h5>
<a id="datacollection-2" class="anchor" href="#datacollection-2" aria-hidden="true"><span class="octicon octicon-link"></span></a>DataCollection</h5>

<pre><code>DataCollection( [Optional Array] data )
</code></pre>

<p>Constructor (used with <code>new</code> keyword)</p>

<p>If provided data, will run <code>DataCollection.prototype.load(data)</code></p>

<hr>

<h3>
<a id="methods" class="anchor" href="#methods" aria-hidden="true"><span class="octicon octicon-link"></span></a>Methods</h3>

<hr>

<h5>
<a id="datacollectionprototypedefineindex" class="anchor" href="#datacollectionprototypedefineindex" aria-hidden="true"><span class="octicon octicon-link"></span></a>DataCollection.prototype.defineIndex</h5>

<pre><code>defineIndex( [String] key )
  returns self
</code></pre>

<p>Define a <em>unique</em> key to use as an index for this collection
  used for <code>DataCollection.prototype.exists</code>, <code>DataCollection.prototype.fetch</code> and
  <code>DataCollection.prototype.destroy</code></p>

<p>All indexed values will be converted to strings, be careful about
  uniqueness</p>

<hr>

<h5>
<a id="datacollectionprototypecreatemapping" class="anchor" href="#datacollectionprototypecreatemapping" aria-hidden="true"><span class="octicon octicon-link"></span></a>DataCollection.prototype.createMapping</h5>

<pre><code>createMapping( [String] key, [Function] map -&gt; ([Object] row) )
  returns self
</code></pre>

<p>Define a mapped key, and a function that returns the associated value
  based on the input row. Can be used any time, new mappings will be applied
  to your DataCollection immediately.</p>

<h6>
<a id="example" class="anchor" href="#example" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example:</h6>

<div class="highlight highlight-javascript"><pre><span class="pl-s">var</span> dc <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">DataCollection</span>();
dc.createMapping(<span class="pl-s1"><span class="pl-pds">'</span>c<span class="pl-pds">'</span></span>, <span class="pl-st">function</span>(<span class="pl-vpf">row</span>) { <span class="pl-k">return</span> row[<span class="pl-s1"><span class="pl-pds">'</span>a<span class="pl-pds">'</span></span>] <span class="pl-k">+</span> row[<span class="pl-s1"><span class="pl-pds">'</span>b<span class="pl-pds">'</span></span>]; });
dc.<span class="pl-s3">load</span>([{a<span class="pl-k">:</span> <span class="pl-c1">1</span>, b<span class="pl-k">:</span> <span class="pl-c1">2</span>}, {a<span class="pl-k">:</span> <span class="pl-c1">2</span>, b<span class="pl-k">:</span> <span class="pl-c1">3</span>}]);
<span class="pl-en">console</span><span class="pl-s3">.log</span>(dc.query().last()); <span class="pl-c">// logs {a: 2, b: 3, c: 5}</span></pre></div>

<hr>

<h5>
<a id="datacollectionprototypeexists" class="anchor" href="#datacollectionprototypeexists" aria-hidden="true"><span class="octicon octicon-link"></span></a>DataCollection.prototype.exists</h5>

<pre><code>exists( [String] indexedValue )
  returns boolean
</code></pre>

<p>Determine whether the DataCollection has an entry with the specified index
  based on your index key</p>

<hr>

<h5>
<a id="datacollectionprototypefetch" class="anchor" href="#datacollectionprototypefetch" aria-hidden="true"><span class="octicon octicon-link"></span></a>DataCollection.prototype.fetch</h5>

<pre><code>fetch( [String] indexedValue )
  returns Object
</code></pre>

<p>fetches object (if it exists) associated with the specified index based on
  your index key. Otherwise, returns <code>null</code>.</p>

<hr>

<h5>
<a id="datacollectionprototypedestroy" class="anchor" href="#datacollectionprototypedestroy" aria-hidden="true"><span class="octicon octicon-link"></span></a>DataCollection.prototype.destroy</h5>

<pre><code>destroy( [String] indexedValue )
  returns true
</code></pre>

<p>Destroys object (if it exists) associated with the specified index based
  on your index key. Otherwise, throws an error.</p>

<hr>

<h5>
<a id="datacollectionprototypeload" class="anchor" href="#datacollectionprototypeload" aria-hidden="true"><span class="octicon octicon-link"></span></a>DataCollection.prototype.load</h5>

<pre><code>load( [Object] row_1, ..., [Object] row_n )
load( [Array] data )
  returns true
</code></pre>

<p>Loads (truncates, then adds) new data from individual row Objects or an
  array of row Objects</p>

<hr>

<h5>
<a id="datacollectionprototypeinsert" class="anchor" href="#datacollectionprototypeinsert" aria-hidden="true"><span class="octicon octicon-link"></span></a>DataCollection.prototype.insert</h5>

<pre><code>insert( [Object] row_1, ..., [Object] row_n )
insert( [Array] data )
  returns true
</code></pre>

<p>Inserts new data from individual row Objects or an array of row Objects</p>

<hr>

<h5>
<a id="datacollectionprototypetruncate" class="anchor" href="#datacollectionprototypetruncate" aria-hidden="true"><span class="octicon octicon-link"></span></a>DataCollection.prototype.truncate</h5>

<pre><code>truncate()
  returns true
</code></pre>

<p>Empties all data from DataCollection</p>

<hr>

<h5>
<a id="datacollectionprototypequery" class="anchor" href="#datacollectionprototypequery" aria-hidden="true"><span class="octicon octicon-link"></span></a>DataCollection.prototype.query</h5>

<pre><code>query()
  returns DataCollectionQuery
</code></pre>

<p>returns a new DataCollectionQuery containing a referential set of all data
  from the parent DataCollection.</p>

<h2>
<a id="datacollectionquery-object" class="anchor" href="#datacollectionquery-object" aria-hidden="true"><span class="octicon octicon-link"></span></a>DataCollectionQuery Object</h2>

<h5>
<a id="datacollectionquery" class="anchor" href="#datacollectionquery" aria-hidden="true"><span class="octicon octicon-link"></span></a>DataCollectionQuery</h5>

<pre><code>DataCollectionQuery()
</code></pre>

<p>Constructor, only accessible via <code>DataCollection.prototype.query()</code></p>

<hr>

<h3>
<a id="methods-1" class="anchor" href="#methods-1" aria-hidden="true"><span class="octicon octicon-link"></span></a>Methods</h3>

<hr>

<h5>
<a id="datacollectionqueryprototypefilter" class="anchor" href="#datacollectionqueryprototypefilter" aria-hidden="true"><span class="octicon octicon-link"></span></a>DataCollectionQuery.prototype.filter</h5>

<pre><code>filter( [Object] filters_1, ..., [Object] filters_n )
  returns new DataCollectionQuery
</code></pre>

<p>Returns a new <code>DataCollectionQuery</code> containing a referential subset of its
  parent. <em>Contains</em> filtered values (see: <strong>Filters</strong>).</p>

<p>Providing new filter objects via separate arguments does a logical OR between
  the filter sets. (Within a filter set is logical AND.)</p>

<hr>

<h5>
<a id="datacollectionqueryprototypeexclude" class="anchor" href="#datacollectionqueryprototypeexclude" aria-hidden="true"><span class="octicon octicon-link"></span></a>DataCollectionQuery.prototype.exclude</h5>

<pre><code>exclude( [Object] filters )
  returns new DataCollectionQuery
</code></pre>

<p>Returns a new <code>DataCollectionQuery</code> containing a referential subset of its
  parent. <em>Excludes</em> filtered values (see: <strong>Filters</strong>)</p>

<hr>

<h5>
<a id="datacollectionqueryprototypespawn" class="anchor" href="#datacollectionqueryprototypespawn" aria-hidden="true"><span class="octicon octicon-link"></span></a>DataCollectionQuery.prototype.spawn</h5>

<pre><code>spawn( [Boolean] ignoreIndex )
  returns new DataCollection
</code></pre>

<p>Creates a new <code>DataCollection</code> object (non-referential, new values) from
  all data contained within the current <code>DataCollectionQuery</code>. Will inherit the
  parent DataCollection's index unless <code>ignoreIndex</code> is set to true.</p>

<hr>

<h5>
<a id="datacollectionqueryprototypeeach" class="anchor" href="#datacollectionqueryprototypeeach" aria-hidden="true"><span class="octicon octicon-link"></span></a>DataCollectionQuery.prototype.each</h5>

<pre><code>each( [Function] callback -&gt; ([Object] row, [Integer] index) )
  returns self
</code></pre>

<p>Loops through all rows of data, and performs <code>callback</code> for each one</p>

<h6>
<a id="example-1" class="anchor" href="#example-1" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h6>

<div class="highlight highlight-javascript"><pre><span class="pl-s">var</span> dc <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">DataCollection</span>([{a<span class="pl-k">:</span> <span class="pl-c1">1</span>, b<span class="pl-k">:</span> <span class="pl-c1">2</span>}, {a<span class="pl-k">:</span> <span class="pl-c1">2</span>, c<span class="pl-k">:</span> <span class="pl-c1">3</span>}]);
<span class="pl-s">var</span> query <span class="pl-k">=</span> dc.query();
dc.each(<span class="pl-st">function</span>(<span class="pl-vpf">row</span>, <span class="pl-vpf">index</span>) {
  <span class="pl-en">console</span><span class="pl-s3">.log</span>(index <span class="pl-k">+</span> <span class="pl-s1"><span class="pl-pds">'</span>: <span class="pl-pds">'</span></span> <span class="pl-k">+</span> row[<span class="pl-s1"><span class="pl-pds">'</span>a<span class="pl-pds">'</span></span>] <span class="pl-k">+</span> <span class="pl-s1"><span class="pl-pds">'</span>, <span class="pl-pds">'</span></span> <span class="pl-k">+</span> row[<span class="pl-s1"><span class="pl-pds">'</span>b<span class="pl-pds">'</span></span>]);
});

<span class="pl-c">// logs</span>
<span class="pl-c">//    0: 1, 2</span>
<span class="pl-c">//    1: 2, 3</span></pre></div>

<hr>

<h5>
<a id="datacollectionqueryprototypeupdate" class="anchor" href="#datacollectionqueryprototypeupdate" aria-hidden="true"><span class="octicon octicon-link"></span></a>DataCollectionQuery.prototype.update</h5>

<pre><code>update( [Object] values )
  returns self
</code></pre>

<p>Assigns all key-value pairs from <em>values</em> to every row in the current
  selection (updates parent DataCollection)</p>

<hr>

<h5>
<a id="datacollectionqueryprototyperemove" class="anchor" href="#datacollectionqueryprototyperemove" aria-hidden="true"><span class="octicon octicon-link"></span></a>DataCollectionQuery.prototype.remove</h5>

<pre><code>remove()
  returns true
</code></pre>

<p>Removes all rows contained in <code>DataCollectionQuery</code> from the parent
  <code>DataCollection</code></p>

<hr>

<h5>
<a id="datacollectionqueryprototypeorder" class="anchor" href="#datacollectionqueryprototypeorder" aria-hidden="true"><span class="octicon octicon-link"></span></a>DataCollectionQuery.prototype.order</h5>

<pre><code>order( [String] key, [Optional Boolean] orderDesc = false )
  returns DataCollectionQuery
</code></pre>

<p>Returns a new DataCollectionQuery containing the parent's rows, sorted
  by a specific key (descending if sortDesc = true).</p>

<p>Sort order is as follows (regardless of ASC or DESC):
  Function, Object, Date Object, String, Boolean, Number, NaN, null, undefined</p>

<p>Strings, Booleans, and Numbers will be sorted based on their values (ASC/DESC)
  Functions, Objects and identical values will be sorted based on the order in
  which they were inserted (stable sort).</p>

<hr>

<h5>
<a id="datacollectionqueryprototypesort" class="anchor" href="#datacollectionqueryprototypesort" aria-hidden="true"><span class="octicon octicon-link"></span></a>DataCollectionQuery.prototype.sort</h5>

<pre><code>sort( [String] key, [Optional Boolean] orderDesc = false )
  returns DataCollectionQuery
</code></pre>

<p>Alias of <code>.order</code></p>

<hr>

<h5>
<a id="datacollectionqueryprototypesequence" class="anchor" href="#datacollectionqueryprototypesequence" aria-hidden="true"><span class="octicon octicon-link"></span></a>DataCollectionQuery.prototype.sequence</h5>

<pre><code>sequence( [String or Number] indexedValue_1, ..., [String or Number] indexedValue_n )
sequence( [Array] indexedValues )
  returns DataCollectionQuery
</code></pre>

<p>Returns a new DataCollectionQuery containing the parent's rows with specified
  indices, ordered in the sequence provided.</p>

<p>Can accept indices as arguments or in an Array.</p>

<hr>

<h5>
<a id="datacollectionqueryprototypevalues" class="anchor" href="#datacollectionqueryprototypevalues" aria-hidden="true"><span class="octicon octicon-link"></span></a>DataCollectionQuery.prototype.values</h5>

<pre><code>values( [Optional String] key )
  returns Array
</code></pre>

<p>Returns an array of all row Objects (each Object is referential!) in the
  <code>DataCollectionQuery</code>, or an array of all values from a specific key if
  provided</p>

<hr>

<h5>
<a id="datacollectionqueryprototypejson" class="anchor" href="#datacollectionqueryprototypejson" aria-hidden="true"><span class="octicon octicon-link"></span></a>DataCollectionQuery.prototype.json</h5>

<pre><code>json( [Optional String] key )
  returns String
</code></pre>

<p>Returns a JSON-stringified version of <code>.values()</code></p>

<hr>

<h5>
<a id="datacollectionqueryprototypemax" class="anchor" href="#datacollectionqueryprototypemax" aria-hidden="true"><span class="octicon octicon-link"></span></a>DataCollectionQuery.prototype.max</h5>

<pre><code>max( [String] key )
  returns Float
</code></pre>

<p>Returns the maximum value (JavaScript "greater than (&gt;)") contained in key
  from the <code>DataCollectionQuery</code> subset</p>

<hr>

<h5>
<a id="datacollectionqueryprototypemin" class="anchor" href="#datacollectionqueryprototypemin" aria-hidden="true"><span class="octicon octicon-link"></span></a>DataCollectionQuery.prototype.min</h5>

<pre><code>min( [String] key )
  returns Float
</code></pre>

<p>Returns the minimum value (JavaScript "greater than (&gt;)") contained in key
  from the DataCollectionQuery subset</p>

<hr>

<h5>
<a id="datacollectionqueryprototypesum" class="anchor" href="#datacollectionqueryprototypesum" aria-hidden="true"><span class="octicon octicon-link"></span></a>DataCollectionQuery.prototype.sum</h5>

<pre><code>sum( [String] key )
  returns Float
</code></pre>

<p>Returns the numeric sum of all values contained in key from the
  <code>DataCollectionQuery</code> subset</p>

<hr>

<h5>
<a id="datacollectionqueryprototypeavg" class="anchor" href="#datacollectionqueryprototypeavg" aria-hidden="true"><span class="octicon octicon-link"></span></a>DataCollectionQuery.prototype.avg</h5>

<pre><code>avg( [String] key )
  returns Float
</code></pre>

<p>Returns the numeric average of all values contained in key from the
  <code>DataCollectionQuery</code> subset</p>

<hr>

<h5>
<a id="datacollectionqueryprototypetransform" class="anchor" href="#datacollectionqueryprototypetransform" aria-hidden="true"><span class="octicon octicon-link"></span></a>DataCollectionQuery.prototype.transform</h5>

<pre><code>transform( [Object] keyMapPair )
  returns new DataCollectionQuery
</code></pre>

<p>Maps each row of the current DataCollectionQuery to a new object with
  specified keys.</p>

<p>The "map" in keyMapPair can be either a string representation of a key or a
  mapping function.</p>

<div class="highlight highlight-javascript"><pre>  dc.<span class="pl-s3">load</span>([
    {a<span class="pl-k">:</span> <span class="pl-c1">1</span>, b<span class="pl-k">:</span> <span class="pl-c1">2</span>, c<span class="pl-k">:</span> <span class="pl-c1">3</span>},
    {a<span class="pl-k">:</span> <span class="pl-c1">4</span>, b<span class="pl-k">:</span> <span class="pl-c1">5</span>, c<span class="pl-k">:</span> <span class="pl-c1">6</span>}
  ]);

  dc.query().transform({d<span class="pl-k">:</span> <span class="pl-s1"><span class="pl-pds">'</span>a<span class="pl-pds">'</span></span>, e<span class="pl-k">:</span> <span class="pl-s1"><span class="pl-pds">'</span>b<span class="pl-pds">'</span></span>, <span class="pl-en">f</span>: <span class="pl-st">function</span>(<span class="pl-vpf">row</span>) { <span class="pl-k">return</span> row.a <span class="pl-k">+</span> row.b <span class="pl-k">+</span> row.c; }}).values();

  <span class="pl-c">/* will return...</span>
<span class="pl-c"></span>
<span class="pl-c">  [</span>
<span class="pl-c">    {d: 1, e: 2, c: 6},</span>
<span class="pl-c">    {d: 4, e: 5, c: 15}</span>
<span class="pl-c">  ]</span>
<span class="pl-c"></span>
<span class="pl-c">  */</span>
</pre></div>

<hr>

<h5>
<a id="datacollectionqueryprototypereduce" class="anchor" href="#datacollectionqueryprototypereduce" aria-hidden="true"><span class="octicon octicon-link"></span></a>DataCollectionQuery.prototype.reduce</h5>

<pre><code>reduce( [String] key, [Function] callback -&gt; ([Any] prevValue, [Any] curValue, [Any] index) )
  returns Any
</code></pre>

<p>Runs a specified reduction function on all values contained in key from
  the <code>DataCollectionQuery</code> subset.</p>

<hr>

<h5>
<a id="datacollectionqueryprototypedistinct" class="anchor" href="#datacollectionqueryprototypedistinct" aria-hidden="true"><span class="octicon octicon-link"></span></a>DataCollectionQuery.prototype.distinct</h5>

<pre><code>distinct( [String] key )
  returns Array
</code></pre>

<p>Returns an array of all unique values (converted to String) with specified
  key from the <code>DataCollectionQuery</code> subset</p>

<hr>

<h5>
<a id="datacollectionqueryprototypelimit" class="anchor" href="#datacollectionqueryprototypelimit" aria-hidden="true"><span class="octicon octicon-link"></span></a>DataCollectionQuery.prototype.limit</h5>

<pre><code>limit( [Integer] count )
limit( [Integer] offset, [Integer] count )
  returns new DataCollectionQuery
</code></pre>

<p>Returns a new <code>DataCollectionQuery</code> containing the first <em>count</em> items from
  the current <code>DataCollectionQuery</code>, or containing <em>count</em> items beginning at
  <em>offset</em></p>

<hr>

<h5>
<a id="datacollectionqueryprototypecount" class="anchor" href="#datacollectionqueryprototypecount" aria-hidden="true"><span class="octicon octicon-link"></span></a>DataCollectionQuery.prototype.count</h5>

<pre><code>count()
  returns Integer
</code></pre>

<p>Returns the amount of items (rows) in the current DataCollectionQuery</p>

<h2>
<a id="filters" class="anchor" href="#filters" aria-hidden="true"><span class="octicon octicon-link"></span></a>Filters</h2>

<p>DataCollection supports a number of filters in the <code>filter()</code> and <code>exclude()</code>
functions. Many will be familiar if you've used the Django ORM or checked out
another project of ours, <a href="http://github.com/thestorefront/FastAPI">FastAPI</a>.</p>

<p>All filters are prefixed with a double underscore when used.</p>

<p>Please note that DataCollection supports filtering (and sorting) based on nested
objects. The syntax is for find the <code>is</code> filtered value of a nested field would
be <code>{field__nestedField__is: 7}</code>. You can nest indefinitely using double
underscores.</p>

<h5>
<a id="is" class="anchor" href="#is" aria-hidden="true"><span class="octicon octicon-link"></span></a>is</h5>

<div class="highlight highlight-javascript"><pre>a <span class="pl-k">===</span> b</pre></div>

<p>Checks for exact equivalence. Equivalent to no specified filter. (Only the field
name). Exists for the purpose of standardization and edge cases (i.e. if your
field ends with <code>__</code>).</p>

<hr>

<h5>
<a id="not" class="anchor" href="#not" aria-hidden="true"><span class="octicon octicon-link"></span></a>not</h5>

<div class="highlight highlight-javascript"><pre>a <span class="pl-k">!==</span> b</pre></div>

<p>Checks for inequivalence. (Not exactly matching.)</p>

<hr>

<h5>
<a id="gt" class="anchor" href="#gt" aria-hidden="true"><span class="octicon octicon-link"></span></a>gt</h5>

<div class="highlight highlight-javascript"><pre>a <span class="pl-k">&gt;</span> b</pre></div>

<p>Checks if contained value is greater than provided value.</p>

<hr>

<h5>
<a id="gte" class="anchor" href="#gte" aria-hidden="true"><span class="octicon octicon-link"></span></a>gte</h5>

<div class="highlight highlight-javascript"><pre>a <span class="pl-k">&gt;=</span> b</pre></div>

<p>Checks if contained value is greater than or equal to provided value.</p>

<hr>

<h5>
<a id="lt" class="anchor" href="#lt" aria-hidden="true"><span class="octicon octicon-link"></span></a>lt</h5>

<div class="highlight highlight-javascript"><pre>a <span class="pl-k">&lt;</span> b</pre></div>

<p>Checks if contained value is less than provided value.</p>

<hr>

<h5>
<a id="lte" class="anchor" href="#lte" aria-hidden="true"><span class="octicon octicon-link"></span></a>lte</h5>

<div class="highlight highlight-javascript"><pre>a <span class="pl-k">&lt;=</span> b</pre></div>

<p>Checks if contained value is less than or equal to provided value.</p>

<hr>

<h5>
<a id="contains" class="anchor" href="#contains" aria-hidden="true"><span class="octicon octicon-link"></span></a>contains</h5>

<div class="highlight highlight-javascript"><pre>a.<span class="pl-s3">indexOf</span>(b) <span class="pl-k">&gt;</span> <span class="pl-k">-</span><span class="pl-c1">1</span></pre></div>

<p>Checks if contained value contains the provided value. Works for strings
or arrays.</p>

<hr>

<h5>
<a id="icontains" class="anchor" href="#icontains" aria-hidden="true"><span class="octicon octicon-link"></span></a>icontains</h5>

<div class="highlight highlight-javascript"><pre>a.<span class="pl-s3">toLowerCase</span>().<span class="pl-s3">indexOf</span>(b.<span class="pl-s3">toLowerCase</span>()) <span class="pl-k">&gt;</span> <span class="pl-k">-</span><span class="pl-c1">1</span></pre></div>

<p>Case insensitive contains. Only works for strings comparisons.</p>

<hr>

<h5>
<a id="in" class="anchor" href="#in" aria-hidden="true"><span class="octicon octicon-link"></span></a>in</h5>

<div class="highlight highlight-javascript"><pre>b.<span class="pl-s3">indexOf</span>(a) <span class="pl-k">&gt;</span> <span class="pl-k">-</span><span class="pl-c1">1</span></pre></div>

<p>Checks if the contained value exists in the provided value. Works for strings or
arrays.</p>

<hr>

<h5>
<a id="not_in" class="anchor" href="#not_in" aria-hidden="true"><span class="octicon octicon-link"></span></a>not_in</h5>

<div class="highlight highlight-javascript"><pre>b.<span class="pl-s3">indexOf</span>(a) <span class="pl-k">===</span> <span class="pl-k">-</span><span class="pl-c1">1</span></pre></div>

<p>Checks if the contained value does not exist in the provided value. Works for
strings or arrays.</p>

<h1>
<a id="tests-and-benchmarks" class="anchor" href="#tests-and-benchmarks" aria-hidden="true"><span class="octicon octicon-link"></span></a>Tests and Benchmarks</h1>

<p>Current test coverage is <strong>100%</strong></p>

<p>Included with this repository are tests (in <code>/tests</code>) to make sure everything
is running as expected.</p>

<p>There is a node webserver in the root repository directory that can be used
for testing on <code>localhost:8888</code>. To start the server (with node installed) simply run:</p>

<pre><code>$ node testserv.js
</code></pre>

<p>Tests are run using <a href="http://qunitjs.com/">QUnit</a>, coverage sampled using <a href="http://blanketjs.org/">Blanket.js</a>.</p>

<p>A few benchmarks are logged in the JavaScript developer console.</p>

<h1>
<a id="acknowledgements" class="anchor" href="#acknowledgements" aria-hidden="true"><span class="octicon octicon-link"></span></a>Acknowledgements</h1>

<p>DataCollection is MIT licensed, feel free to use it wherever you'd like.
Thanks for checking us out! We welcome good, thoughtful contributions.</p>

<p>DataCollection was created at
<a href="http://thestorefront.com/">Storefront, Inc.</a> in 2014 by <a href="http://keithwhor.com">Keith Horwood</a>.</p>

<p>Feel free to follow on Twitter:</p>

<p><a href="http://twitter.com/thestorefront">@thestorefront</a>, <a href="http://twitter.com/keithwhor">@keithwhor</a></p>

<p>Or check out our GitHub Repositories for more libraries:</p>

<p><a href="http://github.com/thestorefront">Storefront on GitHub</a>, <a href="http://github.com/keithwhor">Keith Horwood on GitHub</a></p>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">DataCollection.js maintained by <a href="https://github.com/thestorefront">thestorefront</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

              <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-44899638-7");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>


  </body>
</html>
